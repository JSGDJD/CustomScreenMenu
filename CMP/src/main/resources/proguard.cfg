# 基本配置
-dontshrink
-dontoptimize
-dontpreverify
-dontnote
-ignorewarnings

# 保留注解、枚举、序列化等
-keepattributes *Annotation*
-keepattributes Signature
-keepattributes EnclosingMethod
-keepattributes InnerClasses

# 保留枚举
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

# 保留序列化类
-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
}

# 保留主类（替换为你的主类路径）
-keep public class com.example.ui.CursorMenuPlugin {
    public *;
}

# 保留所有 Bukkit、ProtocolLib、PlaceholderAPI 等类
-keep class org.bukkit.** { *; }
-keep class com.comphenix.protocol.** { *; }
-keep class me.clip.placeholderapi.** { *; }
-keep class space.arim.morepaperlib.** { *; }

# 忽略警告
-dontwarn org.bukkit.**
-dontwarn com.comphenix.**
-dontwarn me.clip.**
-dontwarn space.arim.**
-dontwarn java.**
-dontwarn javax.**
-dontwarn sun.**
-dontwarn com.sun.**

# 添加 JDK 17 模块
-libraryjars <JAVA_HOME>/jmods/java.base.jmod(!**.jar;!module-info.class)
-libraryjars <JAVA_HOME>/jmods/java.logging.jmod(!**.jar;!module-info.class)
-libraryjars <JAVA_HOME>/jmods/java.util.concurrent.jmod(!**.jar;!module-info.class)
-libraryjars <JAVA_HOME>/jmods/java.lang.invoke.jmod(!**.jar;!module-info.class)
-libraryjars <JAVA_HOME>/jmods/java.nio.jmod(!**.jar;!module-info.class)